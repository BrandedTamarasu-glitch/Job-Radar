# Milestone v1.0: Foundation

**Status:** ✅ SHIPPED 2026-02-09
**Phases:** 1-5
**Total Plans:** 7

## Overview

This milestone improves the reliability and usability of Job Radar's scoring engine through three sequential deliveries: fuzzy skill normalization to close known matching gaps, config file support to eliminate repetitive CLI flag typing, and a pytest test suite to validate both new features and existing scoring logic. The build order ensures each phase is self-contained and testable, with the test suite arriving last to cover the completed state of all changes.

## Phases

### Phase 1: Fuzzy Skill Normalization

**Goal**: Users get accurate skill match scores regardless of how job listings format technology names

**Depends on**: Nothing (first phase)

**Requirements**: FUZZ-01, FUZZ-02, FUZZ-03, FUZZ-04, FUZZ-05

**Success Criteria** (what must be TRUE):
1. A job listing containing "node.js" scores the same skill match as one containing "NodeJS" or "Node.js" when the profile lists any of these variants
2. Short skills like "go", "r", and "c" still require word-boundary matching and do not false-positive match inside words like "going" or "programming"
3. All existing `_SKILL_VARIANTS` entries continue to match correctly (zero regressions)
4. New common tech variants (e.g., "postgres" / "postgresql", "k8s" / "kubernetes") are recognized without manual profile entries

**Plans**: 2 plans

- [x] 01-01-PLAN.md — Add _normalize_skill(), wire normalized variant lookup, expand _SKILL_VARIANTS with 16 common tech entries
- [x] 01-02-PLAN.md — Fix C# boundary guard regression in _build_skill_pattern()

### Phase 2: Config File Support

**Goal**: Users can save their preferred CLI defaults once and have them apply automatically on every run

**Depends on**: Phase 1

**Requirements**: CONF-01, CONF-02, CONF-03, CONF-04, CONF-05

**Success Criteria** (what must be TRUE):
1. User creates `~/.job-radar/config.json` with `{"min_score": 3.0, "new_only": true}` and those defaults apply without passing CLI flags
2. Running `job-radar --min-score 2.5` with a config file containing `"min_score": 3.0` uses 2.5 (CLI always wins)
3. Deleting or never creating a config file causes zero behavior change from today's tool
4. Running `job-radar --config /path/to/custom.json` loads that file instead of the default location
5. A config file with `{"unknown_key": true}` produces a clear warning message naming the unrecognized key

**Plans**: 1 plan

- [x] 02-01-PLAN.md — Create config.py module and integrate config loading into CLI pipeline

### Phase 3: Test Suite

**Goal**: Scoring, tracking, and both new features are validated by automated tests that catch regressions before they reach production

**Depends on**: Phase 2

**Requirements**: TEST-01, TEST-02, TEST-03, TEST-04, TEST-05, TEST-06, TEST-07

**Success Criteria** (what must be TRUE):
1. `pytest` runs from the project root and all tests pass with zero failures
2. Every `_score_*` function in scoring.py has at least one parametrized test covering a normal case and an edge case
3. Dealbreaker detection tests verify that exact match, substring match, and case-insensitive match all correctly trigger a 0.0 score
4. Salary parsing tests cover "$120k", "$60/hr", "$120,000", range formats, and "Not listed" without errors
5. Tracker tests run in isolated temp directories and never touch production tracker.json

**Plans**: 2 plans

- [x] 03-01-PLAN.md — Configure pytest, create shared fixtures (conftest.py), and parametrized scoring tests
- [x] 03-02-PLAN.md — Create tracker tests with tmp_path isolation for job_key, mark_seen, get_stats

### Phase 4: Config Module Unit Tests

**Goal**: Config module has comprehensive unit tests providing regression protection for all edge cases

**Depends on**: Phase 3

**Gap Closure**: Closes tech debt from v1.0 milestone audit

**Success Criteria** (what must be TRUE):
1. load_config() with missing file returns {} without errors
2. load_config() with invalid JSON warns to stderr and returns {}
3. load_config() with unknown keys warns to stderr naming each key and filters them out
4. DEFAULT_CONFIG_PATH expands ~ correctly to user home directory
5. KNOWN_KEYS validation accepts valid keys (min_score, new_only, output) and rejects others
6. All config tests use tmp_path for file isolation

**Plans**: 1 plan

- [x] 04-01-PLAN.md — Create tests/test_config.py with parametrized tests for all load_config edge cases

### Phase 5: Test Coverage Completion

**Goal**: Fuzzy variant matching has explicit regression tests preventing variant-specific bugs

**Depends on**: Phase 4

**Gap Closure**: Closes test coverage gap from v1.0 milestone audit

**Success Criteria** (what must be TRUE):
1. Test exists verifying "node.js" profile matches "NodeJS" job text
2. Test exists verifying "kubernetes" profile matches "k8s" job text
3. Test exists verifying ".NET" profile matches "dotnet" job text
4. Test exists verifying "C#" profile matches "csharp" job text
5. All new fuzzy variant tests pass
6. Zero regressions in existing 72 tests (all 76+ tests pass)

**Plans**: 1 plan

- [x] 05-01-PLAN.md — Add fuzzy variant test cases to tests/test_scoring.py

---

## Milestone Summary

**Key Decisions:**

- [01-01]: Normalize only the lookup key in _skill_in_text(), not variant values — keeps _build_skill_pattern() unchanged
- [01-01]: Module-level dict comprehension for _SKILL_VARIANTS_NORMALIZED — zero runtime overhead
- [01-01]: Preserve # and + in normalization via [.\\-\\s]+ negative class — C# and C++ work correctly
- [01-02]: Use _WORD_ONLY_RE compiled regex to detect non-word chars rather than hardcoding exclusions
- [02-01]: KNOWN_KEYS excludes 'profile' (required=True) and 'config' (circular) — only min_score, new_only, output
- [02-01]: Two-pass parse: pre-parser extracts --config path before full parse applies set_defaults
- [03-01]: Use pytest.mark.parametrize with ids parameter for readable test output
- [03-01]: Factory pattern for job_factory fixture enables flexible test data creation
- [03-02]: Use unittest.mock.patch to redirect _TRACKER_PATH to tmp_path for complete isolation
- [04-01]: Use capsys for stderr validation rather than manual redirect in config tests
- [05-01]: Test cross-variant matching through _score_skill_match() rather than _skill_in_text() directly

**Issues Resolved:**

- Fixed C# boundary guard bug causing unmatchable patterns (Phase 1)
- Closed test coverage gap for fuzzy variant matching (Phase 5)
- Added comprehensive config module edge case tests (Phase 4)
- Achieved 78/78 tests passing with zero failures

**Issues Deferred:**

- No integration test for two-pass config parsing flow (lower priority, unit tests cover components)
- Two orphaned functions in tracker.py (update_application_status, get_application_status) for future v2.0

**Technical Debt Incurred:**

- Minor: Config loading integration test (15 min effort)
- Minor: Orphaned tracker functions need docstrings or v2.0 migration

---

_For current project status, see .planning/ROADMAP.md_
_Archived: 2026-02-09_
